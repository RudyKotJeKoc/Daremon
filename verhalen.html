<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daremon – Polana Kłamstw</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background-color: #0a0a0a;
      color: #eee;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background-color: #000;
      padding: 2rem;
      text-align: center;
    }
    header img {
      max-width: 150px;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 2rem;
      background-color: #1a1a1a;
      padding: 1rem;
    }
    nav a {
      color: #ccc;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      color: #fff;
    }
    main {
      display: flex;
      flex: 1;
      padding: 2rem;
      max-width: 100%;
      box-sizing: border-box;
    }
    .toc {
      width: 200px;
      padding-right: 2rem;
      border-right: 1px solid #333;
    }
    .toc a {
      display: block;
      margin-bottom: 1rem;
      color: #ccc;
      text-decoration: none;
      font-weight: bold;
    }
    .toc a:hover {
      color: #fff;
    }
    .story-content {
      flex: 1;
      padding-left: 2rem;
    }
    .language-switcher {
      text-align: center;
      margin: 1rem 0;
    }
    .language-switcher a {
      color: #ccc;
      text-decoration: none;
      font-weight: bold;
      margin: 0 1rem;
    }
    .language-switcher a:hover {
      color: #fff;
    }
    .language-switcher .active {
      color: #fff;
      cursor: default;
    }
    section {
      margin-bottom: 3rem;
      border-left: 4px solid #e63946;
      padding-left: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Daremon logo" />
  </header>
  <nav>
    <a href="winkel.html">Winkel</a>
    <a href="geschiedenis.html">Geschiedenis</a>
    <a href="projecten.html">Projecten</a>
    <a href="plannen.html">Plannen</a>
    <a href="verhalen.html">Verhalen</a>
  </nav>

  <div class="language-switcher">
    <a href="#" id="lang-pl" class="active" onclick="switchLang('pl'); return false;">Polski</a>
    <a href="#" id="lang-nl" onclick="switchLang('nl'); return false;">Nederlands</a>
  </div>

  <main>
    <aside class="toc" id="chapter-toc">
      <!-- Lista rozdziałów -->
    </aside>
    <div class="story-content" id="full-story">
      <!-- Rozdziały -->
    </div>
  </main>

  <footer>
    &copy; 2025 Daremon. Wie alles begrijpt, heeft niets gezien. Waar geen kaart bestaat, is elke richting juist.<br />
    Kontakt: <a href="mailto:info@daremon.nl" style="color: #888; text-decoration: none;">info@daremon.nl</a>
  </footer>

  <script>
    const chapters = [
      'prolog', 'chapter01', 'chapter02', 'chapter03', 'chapter04', 'chapter05',
      'chapter06', 'chapter07', 'chapter08', 'chapter09', 'chapter10', 'chapter11',
      'chapter12', 'chapter13', 'chapter14', 'chapter15', 'chapter16', 'epilog'
    ];

    const chapterTitles = [
      'Prolog', 'Rozdział 1', 'Rozdział 2', 'Rozdział 3', 'Rozdział 4', 'Rozdział 5',
      'Rozdział 6', 'Rozdział 7', 'Rozdział 8', 'Rozdział 9', 'Rozdział 10', 'Rozdział 11',
      'Rozdział 12', 'Rozdział 13', 'Rozdział 14', 'Rozdział 15', 'Rozdział 16', 'Epilog'
    ];

    function switchLang(lang) {
      document.getElementById('lang-pl').classList.toggle('active', lang === 'pl');
      document.getElementById('lang-nl').classList.toggle('active', lang === 'nl');
      loadChapters(lang);
    }

    function loadChapters(lang) {
      const storyContainer = document.getElementById('full-story');
      const tocContainer = document.getElementById('chapter-toc');
      storyContainer.innerHTML = '';
      tocContainer.innerHTML = '';
      chapters.forEach((id, index) => {
        const chapterLink = document.createElement('a');
        chapterLink.href = `#${id}`;
        chapterLink.textContent = chapterTitles[index];
        tocContainer.appendChild(chapterLink);

        fetch(`verhalen/polana/${lang}/${id}.html`)
          .then(res => res.text())
          .then(html => {
            const section = document.createElement('section');
            section.id = id;
            section.innerHTML = html;
            storyContainer.appendChild(section);
          })
          .catch(() => {
            const section = document.createElement('section');
            section.innerHTML = `<p style="color:#e63946">Nie udało się wczytać rozdziału: ${id}</p>`;
            storyContainer.appendChild(section);
          });
      });
    }

    window.onload = () => switchLang('pl');
  </script>
</body>
</html>
